{"ast":null,"code":"import _objectSpread from\"/Users/samaysalunke/Documents/everything-hobby/kwabey-fab-check/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{supabase}from'./supabase';export async function getEntriesReadyForApproval(){// Entries with quality parameters completed and not yet approved\nreturn supabase.from('fabric_entries').select('*').eq('status','READY_TO_ISSUE');}export async function approveEntry(fabric_entry_id){return supabase.from('quantity_approvals').insert([{fabric_entry_id,approval_status:'APPROVED'}]);}export async function holdEntry(fabric_entry_id,reason,details){return supabase.from('quantity_approvals').insert([_objectSpread({fabric_entry_id,approval_status:'ON_HOLD',hold_reason:reason},details)]);}export async function updateApprovalStatus(id,status){return supabase.from('quantity_approvals').update({approval_status:status}).eq('id',id);}export async function createQuantityApproval(data){return supabase.from('quantity_approvals').insert([data]);}export async function getQuantityApproval(fabricEntryId){return supabase.from('quantity_approvals').select('*').eq('fabric_entry_id',fabricEntryId).single();}export async function updateQuantityApproval(id,data){return supabase.from('quantity_approvals').update(data).eq('id',id);}export async function deleteQuantityApproval(id){return supabase.from('quantity_approvals').delete().eq('id',id);}export async function getFabricEntryWithQuality(id){return supabase.from('fabric_entries').select(\"\\n      *,\\n      quality_parameters (*)\\n    \").eq('id',id).single();}export async function getFabricEntriesWithApprovals(){return supabase.from('fabric_entries').select(\"\\n      *,\\n      quality_parameters (*),\\n      quantity_approvals (*)\\n    \").order('date_inwarded',{ascending:false});}","map":{"version":3,"names":["supabase","getEntriesReadyForApproval","from","select","eq","approveEntry","fabric_entry_id","insert","approval_status","holdEntry","reason","details","_objectSpread","hold_reason","updateApprovalStatus","id","status","update","createQuantityApproval","data","getQuantityApproval","fabricEntryId","single","updateQuantityApproval","deleteQuantityApproval","delete","getFabricEntryWithQuality","getFabricEntriesWithApprovals","order","ascending"],"sources":["/Users/samaysalunke/Documents/everything-hobby/kwabey-fab-check/src/services/approval.service.ts"],"sourcesContent":["import { supabase } from './supabase';\nimport { QuantityApproval, HoldReason, ApprovalStatus } from '../utils/types';\n\nexport async function getEntriesReadyForApproval() {\n  // Entries with quality parameters completed and not yet approved\n  return supabase\n    .from('fabric_entries')\n    .select('*')\n    .eq('status', 'READY_TO_ISSUE');\n}\n\nexport async function approveEntry(fabric_entry_id: string) {\n  return supabase.from('quantity_approvals').insert([\n    { fabric_entry_id, approval_status: 'APPROVED' },\n  ]);\n}\n\nexport async function holdEntry(fabric_entry_id: string, reason: HoldReason, details?: Partial<QuantityApproval>) {\n  return supabase.from('quantity_approvals').insert([\n    { fabric_entry_id, approval_status: 'ON_HOLD', hold_reason: reason, ...details },\n  ]);\n}\n\nexport async function updateApprovalStatus(id: string, status: ApprovalStatus) {\n  return supabase.from('quantity_approvals').update({ approval_status: status }).eq('id', id);\n}\n\nexport async function createQuantityApproval(data: Partial<QuantityApproval>) {\n  return supabase.from('quantity_approvals').insert([data]);\n}\n\nexport async function getQuantityApproval(fabricEntryId: string) {\n  return supabase\n    .from('quantity_approvals')\n    .select('*')\n    .eq('fabric_entry_id', fabricEntryId)\n    .single();\n}\n\nexport async function updateQuantityApproval(id: string, data: Partial<QuantityApproval>) {\n  return supabase.from('quantity_approvals').update(data).eq('id', id);\n}\n\nexport async function deleteQuantityApproval(id: string) {\n  return supabase.from('quantity_approvals').delete().eq('id', id);\n}\n\nexport async function getFabricEntryWithQuality(id: string) {\n  return supabase\n    .from('fabric_entries')\n    .select(`\n      *,\n      quality_parameters (*)\n    `)\n    .eq('id', id)\n    .single();\n}\n\nexport async function getFabricEntriesWithApprovals() {\n  return supabase\n    .from('fabric_entries')\n    .select(`\n      *,\n      quality_parameters (*),\n      quantity_approvals (*)\n    `)\n    .order('date_inwarded', { ascending: false });\n} "],"mappings":"oJAAA,OAASA,QAAQ,KAAQ,YAAY,CAGrC,MAAO,eAAe,CAAAC,0BAA0BA,CAAA,CAAG,CACjD;AACA,MAAO,CAAAD,QAAQ,CACZE,IAAI,CAAC,gBAAgB,CAAC,CACtBC,MAAM,CAAC,GAAG,CAAC,CACXC,EAAE,CAAC,QAAQ,CAAE,gBAAgB,CAAC,CACnC,CAEA,MAAO,eAAe,CAAAC,YAAYA,CAACC,eAAuB,CAAE,CAC1D,MAAO,CAAAN,QAAQ,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACK,MAAM,CAAC,CAChD,CAAED,eAAe,CAAEE,eAAe,CAAE,UAAW,CAAC,CACjD,CAAC,CACJ,CAEA,MAAO,eAAe,CAAAC,SAASA,CAACH,eAAuB,CAAEI,MAAkB,CAAEC,OAAmC,CAAE,CAChH,MAAO,CAAAX,QAAQ,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACK,MAAM,CAAC,CAAAK,aAAA,EAC9CN,eAAe,CAAEE,eAAe,CAAE,SAAS,CAAEK,WAAW,CAAEH,MAAM,EAAKC,OAAO,EAC/E,CAAC,CACJ,CAEA,MAAO,eAAe,CAAAG,oBAAoBA,CAACC,EAAU,CAAEC,MAAsB,CAAE,CAC7E,MAAO,CAAAhB,QAAQ,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACe,MAAM,CAAC,CAAET,eAAe,CAAEQ,MAAO,CAAC,CAAC,CAACZ,EAAE,CAAC,IAAI,CAAEW,EAAE,CAAC,CAC7F,CAEA,MAAO,eAAe,CAAAG,sBAAsBA,CAACC,IAA+B,CAAE,CAC5E,MAAO,CAAAnB,QAAQ,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACK,MAAM,CAAC,CAACY,IAAI,CAAC,CAAC,CAC3D,CAEA,MAAO,eAAe,CAAAC,mBAAmBA,CAACC,aAAqB,CAAE,CAC/D,MAAO,CAAArB,QAAQ,CACZE,IAAI,CAAC,oBAAoB,CAAC,CAC1BC,MAAM,CAAC,GAAG,CAAC,CACXC,EAAE,CAAC,iBAAiB,CAAEiB,aAAa,CAAC,CACpCC,MAAM,CAAC,CAAC,CACb,CAEA,MAAO,eAAe,CAAAC,sBAAsBA,CAACR,EAAU,CAAEI,IAA+B,CAAE,CACxF,MAAO,CAAAnB,QAAQ,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACe,MAAM,CAACE,IAAI,CAAC,CAACf,EAAE,CAAC,IAAI,CAAEW,EAAE,CAAC,CACtE,CAEA,MAAO,eAAe,CAAAS,sBAAsBA,CAACT,EAAU,CAAE,CACvD,MAAO,CAAAf,QAAQ,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACuB,MAAM,CAAC,CAAC,CAACrB,EAAE,CAAC,IAAI,CAAEW,EAAE,CAAC,CAClE,CAEA,MAAO,eAAe,CAAAW,yBAAyBA,CAACX,EAAU,CAAE,CAC1D,MAAO,CAAAf,QAAQ,CACZE,IAAI,CAAC,gBAAgB,CAAC,CACtBC,MAAM,iDAGN,CAAC,CACDC,EAAE,CAAC,IAAI,CAAEW,EAAE,CAAC,CACZO,MAAM,CAAC,CAAC,CACb,CAEA,MAAO,eAAe,CAAAK,6BAA6BA,CAAA,CAAG,CACpD,MAAO,CAAA3B,QAAQ,CACZE,IAAI,CAAC,gBAAgB,CAAC,CACtBC,MAAM,gFAIN,CAAC,CACDyB,KAAK,CAAC,eAAe,CAAE,CAAEC,SAAS,CAAE,KAAM,CAAC,CAAC,CACjD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}