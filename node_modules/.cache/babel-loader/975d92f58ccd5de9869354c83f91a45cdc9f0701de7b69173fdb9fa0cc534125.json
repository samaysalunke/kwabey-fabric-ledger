{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getFabricEntries}from'../../../services/fabric.service';import{useApp}from'../../../contexts/AppContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ApprovalList=_ref=>{let{selectedEntryId,onSelectEntry,refreshTrigger}=_ref;const[fabricEntries,setFabricEntries]=useState([]);const[loading,setLoading]=useState(true);const{addNotification}=useApp();useEffect(()=>{fetchPendingEntries();},[refreshTrigger]);const fetchPendingEntries=async()=>{try{setLoading(true);const{data,error}=await getFabricEntries({status:'QUALITY_CHECKED'});if(error){throw new Error(error.message);}setFabricEntries(data||[]);}catch(error){addNotification({type:'error',message:error instanceof Error?error.message:'Failed to fetch fabric entries'});}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Pending Approval\"}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-pulse space-y-4\",children:[1,2,3].map(i=>/*#__PURE__*/_jsx(\"div\",{className:\"h-20 bg-gray-200 rounded\"},i))})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:[\"Pending Approval (\",fabricEntries.length,\")\"]}),fabricEntries.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No entries pending approval\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"All fabric entries have been processed or none have passed quality check yet.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-96 overflow-y-auto\",children:fabricEntries.map(entry=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>onSelectEntry(entry.id),className:\"p-4 border rounded-lg cursor-pointer transition-colors \".concat(selectedEntryId===entry.id?'border-green-500 bg-green-50':'border-gray-200 hover:border-gray-300 hover:bg-gray-50'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-900\",children:entry.seller_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"PO: \",entry.po_number]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 flex items-center space-x-4 text-xs text-gray-500\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[entry.quantity_value,\" \",entry.quantity_unit]}),/*#__PURE__*/_jsx(\"span\",{children:entry.fabric_type}),/*#__PURE__*/_jsx(\"span\",{children:entry.color})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:new Date(entry.date_inwarded).toLocaleDateString()}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:\"Quality Checked\"})]})]})},entry.id))})]});};export default ApprovalList;","map":{"version":3,"names":["React","useState","useEffect","getFabricEntries","useApp","jsx","_jsx","jsxs","_jsxs","ApprovalList","_ref","selectedEntryId","onSelectEntry","refreshTrigger","fabricEntries","setFabricEntries","loading","setLoading","addNotification","fetchPendingEntries","data","error","status","Error","message","type","className","children","map","i","length","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","entry","onClick","id","concat","seller_name","po_number","quantity_value","quantity_unit","fabric_type","color","Date","date_inwarded","toLocaleDateString"],"sources":["/Users/samaysalunke/Documents/everything-hobby/kwabey-fab-check/src/components/modules/approval/ApprovalList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getFabricEntries } from '../../../services/fabric.service';\nimport { FabricEntry } from '../../../utils/types';\nimport { useApp } from '../../../contexts/AppContext';\n\ninterface ApprovalListProps {\n  selectedEntryId: string | null;\n  onSelectEntry: (id: string) => void;\n  refreshTrigger: number;\n}\n\nconst ApprovalList: React.FC<ApprovalListProps> = ({\n  selectedEntryId,\n  onSelectEntry,\n  refreshTrigger,\n}) => {\n  const [fabricEntries, setFabricEntries] = useState<FabricEntry[]>([]);\n  const [loading, setLoading] = useState(true);\n  const { addNotification } = useApp();\n\n  useEffect(() => {\n    fetchPendingEntries();\n  }, [refreshTrigger]);\n\n  const fetchPendingEntries = async () => {\n    try {\n      setLoading(true);\n      const { data, error } = await getFabricEntries({ status: 'QUALITY_CHECKED' });\n      \n      if (error) {\n        throw new Error(error.message);\n      }\n\n      setFabricEntries(data || []);\n    } catch (error) {\n      addNotification({\n        type: 'error',\n        message: error instanceof Error ? error.message : 'Failed to fetch fabric entries',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <h2 className=\"text-lg font-medium text-gray-900 mb-4\">Pending Approval</h2>\n        <div className=\"animate-pulse space-y-4\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"h-20 bg-gray-200 rounded\"></div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white shadow rounded-lg p-6\">\n      <h2 className=\"text-lg font-medium text-gray-900 mb-4\">\n        Pending Approval ({fabricEntries.length})\n      </h2>\n\n      {fabricEntries.length === 0 ? (\n        <div className=\"text-center py-8\">\n          <svg className=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No entries pending approval</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            All fabric entries have been processed or none have passed quality check yet.\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n          {fabricEntries.map((entry) => (\n            <div\n              key={entry.id}\n              onClick={() => onSelectEntry(entry.id)}\n              className={`p-4 border rounded-lg cursor-pointer transition-colors ${\n                selectedEntryId === entry.id\n                  ? 'border-green-500 bg-green-50'\n                  : 'border-gray-200 hover:border-gray-300 hover:bg-gray-50'\n              }`}\n            >\n              <div className=\"flex justify-between items-start\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-sm font-medium text-gray-900\">\n                    {entry.seller_name}\n                  </h3>\n                  <p className=\"text-sm text-gray-500\">\n                    PO: {entry.po_number}\n                  </p>\n                  <div className=\"mt-1 flex items-center space-x-4 text-xs text-gray-500\">\n                    <span>{entry.quantity_value} {entry.quantity_unit}</span>\n                    <span>{entry.fabric_type}</span>\n                    <span>{entry.color}</span>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-xs text-gray-500\">\n                    {new Date(entry.date_inwarded).toLocaleDateString()}\n                  </p>\n                  <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                    Quality Checked\n                  </span>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ApprovalList; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,gBAAgB,KAAQ,kCAAkC,CAEnE,OAASC,MAAM,KAAQ,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAQtD,KAAM,CAAAC,YAAyC,CAAGC,IAAA,EAI5C,IAJ6C,CACjDC,eAAe,CACfC,aAAa,CACbC,cACF,CAAC,CAAAH,IAAA,CACC,KAAM,CAACI,aAAa,CAAEC,gBAAgB,CAAC,CAAGd,QAAQ,CAAgB,EAAE,CAAC,CACrE,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAEiB,eAAgB,CAAC,CAAGd,MAAM,CAAC,CAAC,CAEpCF,SAAS,CAAC,IAAM,CACdiB,mBAAmB,CAAC,CAAC,CACvB,CAAC,CAAE,CAACN,cAAc,CAAC,CAAC,CAEpB,KAAM,CAAAM,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CACFF,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAEG,IAAI,CAAEC,KAAM,CAAC,CAAG,KAAM,CAAAlB,gBAAgB,CAAC,CAAEmB,MAAM,CAAE,iBAAkB,CAAC,CAAC,CAE7E,GAAID,KAAK,CAAE,CACT,KAAM,IAAI,CAAAE,KAAK,CAACF,KAAK,CAACG,OAAO,CAAC,CAChC,CAEAT,gBAAgB,CAACK,IAAI,EAAI,EAAE,CAAC,CAC9B,CAAE,MAAOC,KAAK,CAAE,CACdH,eAAe,CAAC,CACdO,IAAI,CAAE,OAAO,CACbD,OAAO,CAAEH,KAAK,WAAY,CAAAE,KAAK,CAAGF,KAAK,CAACG,OAAO,CAAG,gCACpD,CAAC,CAAC,CACJ,CAAC,OAAS,CACRP,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAID,OAAO,CAAE,CACX,mBACER,KAAA,QAAKkB,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CrB,IAAA,OAAIoB,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cAC5ErB,IAAA,QAAKoB,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CACrC,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAACC,GAAG,CAAEC,CAAC,eACfvB,IAAA,QAAaoB,SAAS,CAAC,0BAA0B,EAAvCG,CAA6C,CACxD,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAEA,mBACErB,KAAA,QAAKkB,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CnB,KAAA,OAAIkB,SAAS,CAAC,wCAAwC,CAAAC,QAAA,EAAC,oBACnC,CAACb,aAAa,CAACgB,MAAM,CAAC,GAC1C,EAAI,CAAC,CAEJhB,aAAa,CAACgB,MAAM,GAAK,CAAC,cACzBtB,KAAA,QAAKkB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BrB,IAAA,QAAKoB,SAAS,CAAC,iCAAiC,CAACK,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAN,QAAA,cACpGrB,IAAA,SAAM4B,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,+CAA+C,CAAE,CAAC,CACpH,CAAC,cACN/B,IAAA,OAAIoB,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,6BAA2B,CAAI,CAAC,cACvFrB,IAAA,MAAGoB,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,+EAE1C,CAAG,CAAC,EACD,CAAC,cAENrB,IAAA,QAAKoB,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CAChDb,aAAa,CAACc,GAAG,CAAEU,KAAK,eACvBhC,IAAA,QAEEiC,OAAO,CAAEA,CAAA,GAAM3B,aAAa,CAAC0B,KAAK,CAACE,EAAE,CAAE,CACvCd,SAAS,2DAAAe,MAAA,CACP9B,eAAe,GAAK2B,KAAK,CAACE,EAAE,CACxB,8BAA8B,CAC9B,wDAAwD,CAC3D,CAAAb,QAAA,cAEHnB,KAAA,QAAKkB,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC/CnB,KAAA,QAAKkB,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBrB,IAAA,OAAIoB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAC9CW,KAAK,CAACI,WAAW,CAChB,CAAC,cACLlC,KAAA,MAAGkB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,MAC/B,CAACW,KAAK,CAACK,SAAS,EACnB,CAAC,cACJnC,KAAA,QAAKkB,SAAS,CAAC,wDAAwD,CAAAC,QAAA,eACrEnB,KAAA,SAAAmB,QAAA,EAAOW,KAAK,CAACM,cAAc,CAAC,GAAC,CAACN,KAAK,CAACO,aAAa,EAAO,CAAC,cACzDvC,IAAA,SAAAqB,QAAA,CAAOW,KAAK,CAACQ,WAAW,CAAO,CAAC,cAChCxC,IAAA,SAAAqB,QAAA,CAAOW,KAAK,CAACS,KAAK,CAAO,CAAC,EACvB,CAAC,EACH,CAAC,cACNvC,KAAA,QAAKkB,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBrB,IAAA,MAAGoB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CACjC,GAAI,CAAAqB,IAAI,CAACV,KAAK,CAACW,aAAa,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAClD,CAAC,cACJ5C,IAAA,SAAMoB,SAAS,CAAC,iGAAiG,CAAAC,QAAA,CAAC,iBAElH,CAAM,CAAC,EACJ,CAAC,EACH,CAAC,EA9BDW,KAAK,CAACE,EA+BR,CACN,CAAC,CACC,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA/B,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}