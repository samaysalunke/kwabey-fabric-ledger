{"ast":null,"code":"import { supabase } from './supabase';\nexport async function getEntriesReadyForApproval() {\n  // Entries with quality parameters completed and not yet approved\n  return supabase.from('fabric_entries').select('*').eq('status', 'READY_TO_ISSUE');\n}\nexport async function approveEntry(fabric_entry_id) {\n  return supabase.from('quantity_approvals').insert([{\n    fabric_entry_id,\n    approval_status: 'APPROVED'\n  }]);\n}\nexport async function holdEntry(fabric_entry_id, reason, details) {\n  return supabase.from('quantity_approvals').insert([{\n    fabric_entry_id,\n    approval_status: 'ON_HOLD',\n    hold_reason: reason,\n    ...details\n  }]);\n}\nexport async function updateApprovalStatus(id, status) {\n  return supabase.from('quantity_approvals').update({\n    approval_status: status\n  }).eq('id', id);\n}\nexport async function createQuantityApproval(data) {\n  return supabase.from('quantity_approvals').insert([data]);\n}\nexport async function getQuantityApproval(fabricEntryId) {\n  return supabase.from('quantity_approvals').select('*').eq('fabric_entry_id', fabricEntryId).single();\n}\nexport async function updateQuantityApproval(id, data) {\n  return supabase.from('quantity_approvals').update(data).eq('id', id);\n}\nexport async function deleteQuantityApproval(id) {\n  return supabase.from('quantity_approvals').delete().eq('id', id);\n}\nexport async function getFabricEntryWithQuality(id) {\n  return supabase.from('fabric_entries').select(`\n      *,\n      quality_parameters (*)\n    `).eq('id', id).single();\n}\nexport async function getFabricEntriesWithApprovals() {\n  return supabase.from('fabric_entries').select(`\n      *,\n      quality_parameters (*),\n      quantity_approvals (*)\n    `).order('date_inwarded', {\n    ascending: false\n  });\n}","map":{"version":3,"names":["supabase","getEntriesReadyForApproval","from","select","eq","approveEntry","fabric_entry_id","insert","approval_status","holdEntry","reason","details","hold_reason","updateApprovalStatus","id","status","update","createQuantityApproval","data","getQuantityApproval","fabricEntryId","single","updateQuantityApproval","deleteQuantityApproval","delete","getFabricEntryWithQuality","getFabricEntriesWithApprovals","order","ascending"],"sources":["/Users/samaysalunke/Documents/everything-hobby/kwabey-fab-check/src/services/approval.service.ts"],"sourcesContent":["import { supabase } from './supabase';\nimport { QuantityApproval, HoldReason, ApprovalStatus } from '../utils/types';\n\nexport async function getEntriesReadyForApproval() {\n  // Entries with quality parameters completed and not yet approved\n  return supabase\n    .from('fabric_entries')\n    .select('*')\n    .eq('status', 'READY_TO_ISSUE');\n}\n\nexport async function approveEntry(fabric_entry_id: string) {\n  return supabase.from('quantity_approvals').insert([\n    { fabric_entry_id, approval_status: 'APPROVED' },\n  ]);\n}\n\nexport async function holdEntry(fabric_entry_id: string, reason: HoldReason, details?: Partial<QuantityApproval>) {\n  return supabase.from('quantity_approvals').insert([\n    { fabric_entry_id, approval_status: 'ON_HOLD', hold_reason: reason, ...details },\n  ]);\n}\n\nexport async function updateApprovalStatus(id: string, status: ApprovalStatus) {\n  return supabase.from('quantity_approvals').update({ approval_status: status }).eq('id', id);\n}\n\nexport async function createQuantityApproval(data: Partial<QuantityApproval>) {\n  return supabase.from('quantity_approvals').insert([data]);\n}\n\nexport async function getQuantityApproval(fabricEntryId: string) {\n  return supabase\n    .from('quantity_approvals')\n    .select('*')\n    .eq('fabric_entry_id', fabricEntryId)\n    .single();\n}\n\nexport async function updateQuantityApproval(id: string, data: Partial<QuantityApproval>) {\n  return supabase.from('quantity_approvals').update(data).eq('id', id);\n}\n\nexport async function deleteQuantityApproval(id: string) {\n  return supabase.from('quantity_approvals').delete().eq('id', id);\n}\n\nexport async function getFabricEntryWithQuality(id: string) {\n  return supabase\n    .from('fabric_entries')\n    .select(`\n      *,\n      quality_parameters (*)\n    `)\n    .eq('id', id)\n    .single();\n}\n\nexport async function getFabricEntriesWithApprovals() {\n  return supabase\n    .from('fabric_entries')\n    .select(`\n      *,\n      quality_parameters (*),\n      quantity_approvals (*)\n    `)\n    .order('date_inwarded', { ascending: false });\n} "],"mappings":"AAAA,SAASA,QAAQ,QAAQ,YAAY;AAGrC,OAAO,eAAeC,0BAA0BA,CAAA,EAAG;EACjD;EACA,OAAOD,QAAQ,CACZE,IAAI,CAAC,gBAAgB,CAAC,CACtBC,MAAM,CAAC,GAAG,CAAC,CACXC,EAAE,CAAC,QAAQ,EAAE,gBAAgB,CAAC;AACnC;AAEA,OAAO,eAAeC,YAAYA,CAACC,eAAuB,EAAE;EAC1D,OAAON,QAAQ,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACK,MAAM,CAAC,CAChD;IAAED,eAAe;IAAEE,eAAe,EAAE;EAAW,CAAC,CACjD,CAAC;AACJ;AAEA,OAAO,eAAeC,SAASA,CAACH,eAAuB,EAAEI,MAAkB,EAAEC,OAAmC,EAAE;EAChH,OAAOX,QAAQ,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACK,MAAM,CAAC,CAChD;IAAED,eAAe;IAAEE,eAAe,EAAE,SAAS;IAAEI,WAAW,EAAEF,MAAM;IAAE,GAAGC;EAAQ,CAAC,CACjF,CAAC;AACJ;AAEA,OAAO,eAAeE,oBAAoBA,CAACC,EAAU,EAAEC,MAAsB,EAAE;EAC7E,OAAOf,QAAQ,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACc,MAAM,CAAC;IAAER,eAAe,EAAEO;EAAO,CAAC,CAAC,CAACX,EAAE,CAAC,IAAI,EAAEU,EAAE,CAAC;AAC7F;AAEA,OAAO,eAAeG,sBAAsBA,CAACC,IAA+B,EAAE;EAC5E,OAAOlB,QAAQ,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACK,MAAM,CAAC,CAACW,IAAI,CAAC,CAAC;AAC3D;AAEA,OAAO,eAAeC,mBAAmBA,CAACC,aAAqB,EAAE;EAC/D,OAAOpB,QAAQ,CACZE,IAAI,CAAC,oBAAoB,CAAC,CAC1BC,MAAM,CAAC,GAAG,CAAC,CACXC,EAAE,CAAC,iBAAiB,EAAEgB,aAAa,CAAC,CACpCC,MAAM,CAAC,CAAC;AACb;AAEA,OAAO,eAAeC,sBAAsBA,CAACR,EAAU,EAAEI,IAA+B,EAAE;EACxF,OAAOlB,QAAQ,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACc,MAAM,CAACE,IAAI,CAAC,CAACd,EAAE,CAAC,IAAI,EAAEU,EAAE,CAAC;AACtE;AAEA,OAAO,eAAeS,sBAAsBA,CAACT,EAAU,EAAE;EACvD,OAAOd,QAAQ,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACsB,MAAM,CAAC,CAAC,CAACpB,EAAE,CAAC,IAAI,EAAEU,EAAE,CAAC;AAClE;AAEA,OAAO,eAAeW,yBAAyBA,CAACX,EAAU,EAAE;EAC1D,OAAOd,QAAQ,CACZE,IAAI,CAAC,gBAAgB,CAAC,CACtBC,MAAM,CAAC;AACZ;AACA;AACA,KAAK,CAAC,CACDC,EAAE,CAAC,IAAI,EAAEU,EAAE,CAAC,CACZO,MAAM,CAAC,CAAC;AACb;AAEA,OAAO,eAAeK,6BAA6BA,CAAA,EAAG;EACpD,OAAO1B,QAAQ,CACZE,IAAI,CAAC,gBAAgB,CAAC,CACtBC,MAAM,CAAC;AACZ;AACA;AACA;AACA,KAAK,CAAC,CACDwB,KAAK,CAAC,eAAe,EAAE;IAAEC,SAAS,EAAE;EAAM,CAAC,CAAC;AACjD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}